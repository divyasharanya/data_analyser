<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Weekly Data Analyzer</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Dark mode */
body.dark-mode {
  background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
  color: #ecf0f1;
}

body.dark-mode .navbar {
  background: #1e272e;
  color: white;
}

body.dark-mode .navbar a {
  color: #ecf0f1;
}

body.dark-mode .navbar a:hover {
  color: #3498db;
}

body.dark-mode .expenses {
  background: #2f3640;
  color: #f5f6fa;
}

body.dark-mode .stats-card {
  background: #353b48;
  color: #dcdde1;
}

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh; display: flex; flex-direction: column;
    }
    .navbar {
      display: flex; justify-content: space-between; align-items: center;
      background: white; padding: 15px 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .navbar-left a, .navbar-right a {
      margin: 0 15px; text-decoration: none; color: #34495e;
      font-weight: 700; transition: color 0.3s;
    }
    .navbar a:hover { color: #3498db; }
    .profile-icon {
      position: relative; cursor: pointer; font-size: 22px;
    }
    .profile-dropdown {
      display: none; position: absolute; right: 0; background: white;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      border-radius: 10px; margin-top: 10px; z-index: 1000; min-width: 120px;
    }
    .profile-dropdown a {
      display: block; padding: 10px 15px; text-decoration: none; color: #34495e;
    }
    .profile-dropdown a:hover { background: #f0f0f0; }
    .main-container {
      display: flex; justify-content: space-between; padding: 20px; flex: 1;
    }
    .expenses {
      flex: 1; background: white; border-radius: 20px; padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    .welcome-message { margin-bottom: 20px; font-size: 1.5em; color: #2c3e50; }
    .stats-card {
      background: #f8f9fa; border-radius: 10px; padding: 15px; margin-bottom: 20px;
      text-align: center;
    }
    .stats-card h3 { margin-bottom: 10px; color: #34495e; }
    .stats-card p { color: #7f8c8d; }
    @media (max-width: 768px) { .main-container { flex-direction: column; } }
  </style>
</head>
<body>
  <div class="navbar">
    <div class="navbar-left">
      <a href="mainpage.html">Dashboard</a>
      <a href="week.html">Weekly Data Analyzer</a>
      <a href="expense_manager.html">Expense Manager</a>
    </div>
    <div class="navbar-right">
      <!-- Login/Signup -->
      <a href="login.html" id="loginLink">Login</a>
      <a href="signup.html" id="signupLink">Signup</a>

      <!-- Profile (only when logged in) -->
      <div class="profile-icon" id="profileIcon" style="display: none;" onclick="toggleDropdown()">
        üë§
        <div class="profile-dropdown" id="profileDropdown">
          <a href="#" onclick="toggleDarkMode()">üåó Toggle Dark Mode</a>

          <a href="#">Settings</a>
          <a href="#" onclick="logout()">Logout</a>
        </div>
      </div>
    </div>
  </div>

  <div class="main-container">
    <div class="expenses">
      <div class="welcome-message" id="welcomeMsg">Welcome, Guest üëã</div>
      <div class="stats-card">
        <h3>Last Week's Expense Summary</h3>
        <p>You spent ‚Çπ3,200 last week, mostly on Food üçî.</p>
      </div>
    </div>
  </div>

  <script>
    
    // Simulated login status (replace with actual backend/session check)
    let userFromDB = JSON.parse(localStorage.getItem("user")) || { loggedIn: false };

    window.onload = function() {
      if (userFromDB.loggedIn) {
        document.getElementById("profileIcon").style.display = "block";
        document.getElementById("loginLink").style.display = "none";
        document.getElementById("signupLink").style.display = "none";
        document.getElementById("welcomeMsg").innerText = "Welcome, " + userFromDB.username + " üëã";
      } else {
        document.getElementById("profileIcon").style.display = "none";
        document.getElementById("loginLink").style.display = "inline-block";
        document.getElementById("signupLink").style.display = "inline-block";
        document.getElementById("welcomeMsg").innerText = "Welcome, Guest üëã";
      }
    };
    function toggleDarkMode() {
  document.body.classList.toggle("dark-mode");
  // save mode preference
  localStorage.setItem("darkMode", document.body.classList.contains("dark-mode"));
}

    function toggleDropdown() {
      const dropdown = document.getElementById("profileDropdown");
      dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
    }

    function logout() {
      alert("Logged out!");
      localStorage.removeItem("user"); // clear saved user
      location.reload();
    }
  </script>
</body>
</html>
